<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Дыхание Грома — Официальный шаблон</title>

<style>
/* ————— твои стили без изменений ————— */
:root{
  --bg-1:#fff6f1;
  --bg-2:#fff0e6;
  --peach-1:#ffe9d9;
  --peach-2:#ffd6b8;
  --accent:#071a2b;
  --accent-2:#0b2a45;
  --muted:#65707a;
  --glass: rgba(255,255,255,0.7);
  --card-radius:16px;
  --gap:20px;
  --max-width:1150px;
  font-family: Inter, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(800px 260px at 10% 12%, rgba(255,210,180,0.9), transparent 8%),
    radial-gradient(900px 300px at 88% 88%, rgba(255,240,230,0.95), transparent 12%),
    linear-gradient(180deg,var(--bg-1), var(--bg-2));
  color:var(--accent);
  overflow-y:scroll;
  --page-pad:28px;
}
#bg-canvas{
  position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:0;
  mix-blend-mode:screen;
}
/* остальной CSS без изменений... */
</style>
</head>
<body>

<canvas id="bg-canvas" aria-hidden="true"></canvas>

<header class="header">
  <!-- шапка без изменений -->
</header>

<main class="container">
  <!-- контент без изменений -->
</main>

<script>
/* ========================
   UI: Tabs, ripple, uploads, tilt
   ======================== */
// весь твой JS для вкладок, ripple, загрузок и пр. — без изменений
</script>

<script>
/* ========================
   Canvas effects: lightning + parallax glow + clouds
   ======================== */
(function(){
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d', {alpha:true});
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;
  let mouse = {x: w/2, y: h/2, vx:0, vy:0};
  let pointers = [];
  const maxTrail = 20;
  const bolts = [];

  // облака
  const clouds = [];
  for(let i=0;i<8;i++){
    clouds.push({
      x: Math.random()*w,
      y: Math.random()*h*0.6,
      r: 120 + Math.random()*180,
      a: 0.05 + Math.random()*0.08,
      speed: 0.05 + Math.random()*0.12,
    });
  }
  let neonPhase = 0;
  function drawClouds(){
    neonPhase += 0.005;
    for(const c of clouds){
      c.x += c.speed;
      if(c.x - c.r > w) c.x = -c.r;
      const grd = ctx.createRadialGradient(c.x, c.y, 0, c.x, c.y, c.r);
      grd.addColorStop(0, `rgba(255,255,255,${c.a*0.8})`);
      grd.addColorStop(1, `rgba(255,255,255,0)`);
      ctx.fillStyle = grd;
      ctx.fillRect(c.x-c.r, c.y-c.r, c.r*2, c.r*2);
    }
    const glow = Math.sin(neonPhase)*0.2 + 0.4;
    const grd2 = ctx.createLinearGradient(0,0,w,h);
    grd2.addColorStop(0, `rgba(255,220,180,${glow*0.05})`);
    grd2.addColorStop(1, `rgba(180,220,255,${glow*0.05})`);
    ctx.fillStyle = grd2;
    ctx.fillRect(0,0,w,h);
  }

  window.addEventListener('resize', ()=> {
    w = canvas.width = innerWidth;
    h = canvas.height = innerHeight;
  });

  let lastMove = 0;
  window.addEventListener('mousemove', (e)=> {
    const now = performance.now();
    mouse.vx = (e.clientX - mouse.x);
    mouse.vy = (e.clientY - mouse.y);
    mouse.x = e.clientX; mouse.y = e.clientY;
    pointers.push({x:mouse.x, y:mouse.y, t:now});
    if(pointers.length>maxTrail) pointers.shift();
    if(now - lastMove > 40 && (Math.abs(mouse.vx)+Math.abs(mouse.vy) > 10)) {
      spawnBolt(mouse.x, mouse.y, 0.6);
      lastMove = now;
    }
  });

  window.addEventListener('click', (e)=> {
    spawnBolt(e.clientX, e.clientY, 1.4, true);
    if(window.soundEnabled) playTone();
    heavyFlash();
  });

  function spawnBolt(x,y,intensity=1,branch=false){
    const len = (120 + Math.random()*220) * intensity;
    const angle = (Math.random()*Math.PI*2);
    const sx = x; const sy = y;
    const ex = sx + Math.cos(angle) * len;
    const ey = sy + Math.sin(angle) * len;
    bolts.push({
      x:sx,y:sy,ex,ey,life:1.0,decay:0.02 + Math.random()*0.03, width:1.2 * intensity, branch:branch
    });
  }

  let
Performance.now
www.dn.now


lashAlpha = 0;
  function heavyFlash(){ flashAlpha = Math.max(flashAlpha, 0.85); }

  const audioCtx = (typeof AudioContext !== 'undefined') ? new AudioContext() : null;
  function playTone(){
    if(!audioCtx) return;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.value = 220 + Math.random()*220;
    g.gain.value = 0.0001;
    o.connect(g); g.connect(audioCtx.destination);
    const now = audioCtx.currentTime;
    g.gain.exponentialRampToValueAtTime(0.08, now + 0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.25);
    o.start(now); o.stop(now + 0.26);
  }

  function draw(){
    ctx.clearRect(0,0,w,h);

    drawClouds();

    for(let i=0;i<pointers.length;i++){
      const p = pointers[Math.max(0, pointers.length-1 - i)];
      const age = (performance.now() - p.t) / 800;
      const alpha = Math.max(0, 0.16 * (1 - age));
      if(alpha<=0) continue;
      const radius = 80 + i*10;
      const grd = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, radius);
      grd.addColorStop(0, `rgba(255,220,180,${alpha*0.22})`);
      grd.addColorStop(1, `rgba(255,200,160,0)`);
      ctx.fillStyle = grd;
      ctx.fillRect(p.x-radius, p.y-radius, radius*2, radius*2);
    }

    for(let i=bolts.length-1;i>=0;i--){
      const b = bolts[i];
      const segs = 14;
      ctx.lineCap = 'round';
      ctx.globalCompositeOperation = 'lighter';
      ctx.beginPath();
      const width = b.width * (1 + Math.random()*0.8);
      ctx.lineWidth = width;
      ctx.strokeStyle = `rgba(255,255,255,${0.9 * b.life})`;
      for(let j=1;j<=segs;j++){
        const t = j / segs;
        let nx = b.x + (b.ex - b.x) * t + (Math.random()-0.5) * 24 * (1 - t);
        let ny = b.y + (b.ey - b.y) * t + (Math.random()-0.5) * 24 * (1 - t);
        ctx.lineTo(nx, ny);
      }
      ctx.stroke();

      ctx.beginPath();
      ctx.strokeStyle = `rgba(180,220,255,${0.18 * b.life})`;
      ctx.lineWidth = b.width * 6;
      ctx.moveTo(b.x, b.y);
      ctx.lineTo(b.ex, b.ey);
      ctx.stroke();

      b.life -= b.decay;
      if(b.life <= 0) bolts.splice(i,1);
      if(Math.random() < 0.006 && b.life > 0.6 && b.branch === false){
        spawnBolt((b.x + b.ex)/2 + (Math.random()-0.5)*80, (b.y + b.ey)/2 + (Math.random()-0.5)*80, 0.5, true);
      }
    }
    ctx.globalCompositeOperation = 'source-over';

    if(flashAlpha > 0){
      ctx.fillStyle = `rgba(255,240,220,${Math.min(0.95, flashAlpha)})`;
      ctx.fillRect(0,0,w,h);
      flashAlpha *= 0.9;
      if(flashAlpha < 0.01) flashAlpha = 0;
    }

    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);

  setInterval(()=>{
    if(Math.random() < 0.4) return;
    const x = Math.random() * w;
    const y = Math.random() * h * 0.6;
    spawnBolt(x, y, 1.0, false);
  }, 2200);
})();
</script>

</body>
</html> f
