
для загрузки">
                <input type="file" accept="image/*" data-slot="0" />
                <div class="photo-uploader">
                  <div class="small">Нажмите или перетащите</div>
                  <div class="small muted">Фото 1 — Операция</div>
                </div>
                <div class="meta">Фото 1</div>
              </label>

              <label class="photo-card" aria-label="Фото 2" title="Нажмите для загрузки">
                <input type="file" accept="image/*" data-slot="1" />
                <div class="photo-uploader">
                  <div class="small">Нажмите или перетащите</div>
                  <div class="small muted">Фото 2 — Команда</div>
                </div>
                <div class="meta">Фото 2</div>
              </label>

              <label class="photo-card" aria-label="Фото 3" title="Нажмите для загрузки">
                <input type="file" accept="image/*" data-slot="2" />
                <div class="photo-uploader">
                  <div class="small">Нажмите или перетащите</div>
                  <div class="small muted">Фото 3 — Мем/скрин</div>
                </div>
                <div class="meta">Фото 3</div>
              </label>
            </div>
          </div>
        </article>
      </div>

      <!-- Ranks panel -->
      <div id="ranks" class="panel" aria-labelledby="ranks-title">
        <article class="card tilt" id="ranks-card">
          <h2 id="ranks-title">Система повышений</h2>
          <p class="small">Пример официальной схемы повышение рангов. Настроить под правила сервера.</p>

          <div class="ranks" role="list">
            <div class="rank" role="listitem">
              <h4>Новобранец</h4>
              <div class="requirements">Вступление, прохождение вводной тренировки, 2 недели активности.</div>
            </div>

            <div class="rank" role="listitem">
              <h4>Штурмовик</h4>
              <div class="requirements">Участие в 10 операциях, знание тактик, командная игра.</div>
            </div>

            <div class="rank" role="listitem">
              <h4>Сержант</h4>
              <div class="requirements">Командование отрядом, ведение 3 операций, положительные отзывы.</div>
            </div>

            <div class="rank" role="listitem">
              <h4>Офицер</h4>
              <div class="requirements">Проведение инструктажей, 30+ часов роли, доказанный вклад.</div>
            </div>

            <div class="rank" role="listitem">
              <h4>Командир</h4>
              <div class="requirements">Назначение руководством; ответственность и стратегическое видение.</div>
            </div>
          </div>

          <div class="hr"></div>
          <p class="small muted">Подсказка: храните журналы повышения (даты, доказательства) — это облегчает спорные назначения.</p>
        </article>
      </div>

      <!-- Dress panel -->
      <div id="dress" class="panel" aria-labelledby="dress-title">
        <article class="card tilt" id="dress-card">
          <h2 id="dress-title">Дресс-код</h2>
          <p class="small">Единый внешний вид повышает узнаваемость и атмосферу. Примеры и запреты ниже.</p>

          <div class="dress-list" role="list">
            <div class="dress-item" role="listitem">
              <h5>Основной комплект</h5>
              <div class="example small">Тёмно-синий жилет, персиковая нашивка «DG», чёрные тактические штаны.</div>
            </div>

            <div class="dress-item" role="listitem">
              <h5>Офицерский комплект</h5>
              <div class="example small">Светлая куртка, эмблема, доп. значки и фонарик.</div>
            </div>

            <div class="dress-item" role="listitem">
              <h5>Оперативный камуфляж</h5>
              <div class="example small">Тёмно-персиковый/песочный камуфляж, каска, очки.</div>
            </div>

            <div class="dress-item" role="listitem">
              <h5>Запрещено</h5>
              <div class="example small">Яркие неоновые костюмы, символика враждебных фракций.</div>
            </div>


</div>

          <div class="hr"></div>
          <p class="small muted">Рекомендация: добавьте в фотосекции примеры допустимой/недопустимой формы для быстрого справочника.</p>
        </article>
      </div>
    </section>

    <!-- Right aside -->
    <aside class="aside">
      <div class="card" style="padding:16px">
        <h3>Коротко</h3>
        <div class="small">Отряд: <strong>Дыхание Грома</strong></div>
        <div class="small">Платформа: Garry's Mod</div>

        <div class="cta">
          <button class="btn" id="download-style">Скачать HTML</button>
          <button class="btn secondary" id="toggle-sound">Звук всполохов: <span id="sound-state">Выкл</span></button>
        </div>
      </div>

      <div style="height:18px"></div>

      <div class="card small">
        <h4>Интерактив</h4>
        <p class="small muted">Передвиньте курсор — увидите электрические всполохи в фоне. Клик — сильная вспышка.
        Кнопки имеют эффект «ripple» при нажатии.</p>
      </div>
    </aside>
  </div>

  <footer>
    © <span id="year"></span> Дыхание Грома — Официальный шаблон. Сделано для сообщества Garry's Mod.
  </footer>
</main>

<script>
/* ========================
   UI: Tabs, ripple, uploads, tilt
   ======================== */
document.addEventListener('DOMContentLoaded', ()=> {
  // Tabs
  const navBtns = document.querySelectorAll('.nav-btn');
  navBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      navBtns.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const tab = btn.dataset.tab;
      document.querySelectorAll('.panel').forEach(p=>{
        if(p.id === tab){ p.classList.add('active'); p.scrollIntoView({behavior:'smooth', block:'start'});}
        else p.classList.remove('active');
      });
    });
  });

  // Ripple effect for buttons
  document.querySelectorAll('.btn').forEach(button=>{
    button.addEventListener('click', function(e){
      // create ripple
      const rect = this.getBoundingClientRect();
      const circle = document.createElement('span');
      circle.className = 'ripple';
      const size = Math.max(rect.width, rect.height) * 1.6;
      circle.style.width = circle.style.height = size + 'px';
      circle.style.left = (e.clientX - rect.left - size/2) + 'px';
      circle.style.top = (e.clientY - rect.top - size/2) + 'px';
      this.appendChild(circle);
      // animate
      circle.style.transition = 'transform .6s cubic-bezier(.2,.9,.2,1), opacity .6s ease';
      requestAnimationFrame(()=> circle.style.transform = 'scale(1)');
      circle.style.opacity = '0';
      setTimeout(()=> circle.remove(), 700);
    });
  });

  // Photo upload previews + drag&drop
  function handleFileInput(input){
    const file = input.files && input.files[0];
    if(!file) return;
    const reader = new FileReader();
    const card = input.closest('.photo-card');
    reader.onload = e => {
      card.innerHTML = '<img src="'+e.target.result+'" alt="Фото отряда">';
    };
    reader.readAsDataURL(file);
  }
  document.querySelectorAll('input[type=file]').forEach(inp=>{
    inp.addEventListener('change', ()=> handleFileInput(inp));
    const label = inp.closest('label');
    label.addEventListener('dragover', e=>{ e.preventDefault(); label.style.borderColor='rgba(7,32,58,0.12)'; });
    label.addEventListener('dragleave', e=>{ label.style.borderColor=''; });
    label.addEventListener('drop', e=>{ e.preventDefault(); label.style.borderColor=''; if(e.dataTransfer.files) { inp.files = e.dataTransfer.files; handleFileInput(inp); }});
  });

  // Download HTML template (serializes current DOM)
  document.getElementById('download-style').addEventListener('click', ()=>{
    const doctype = '<!doctype html>\\n';
    const html = document.documentElement.outerHTML;
    const blob = new Blob([doctype + html], {type:'text/html;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'dyhanie_groma_official.html';
    document.body.appendChild(a); a.click(); a.remove();
    UR


L.revokeObjectURL(url);
  });

  // Tilt effect on cards (subtle)
  const tiltItems = document.querySelectorAll('.tilt');
  tiltItems.forEach(el=>{
    el.addEventListener('mousemove', (e)=>{
      const r = el.getBoundingClientRect();
      const px = (e.clientX - r.left) / r.width;
      const py = (e.clientY - r.top) / r.height;
      const rx = (py - 0.5) * 6; // rotateX
      const ry = (px - 0.5) * -6; // rotateY
      el.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg)`;
    });
    el.addEventListener('mouseleave', ()=> el.style.transform = 'perspective(900px) rotateX(0deg) rotateY(0deg)');
  });

  // Sound toggle for flashes (simple)
  let soundEnabled = false;
  const soundBtn = document.getElementById('toggle-sound');
  const soundState = document.getElementById('sound-state');
  soundBtn.addEventListener('click', ()=> {
    soundEnabled = !soundEnabled;
    soundState.textContent = soundEnabled ? 'Вкл' : 'Выкл';
  });

  // Year
  document.getElementById('year').textContent = new Date().getFullYear();
});

/* ========================
   Canvas effects: lightning + parallax glow
   ======================== */
(function(){
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d', {alpha:true});
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;
  let mouse = {x: w/2, y: h/2, vx:0, vy:0};
  let pointers = []; // recent pointer trail
  const maxTrail = 20;
  // lightning bolts stored and drawn with life
  const bolts = [];

  // resize
  window.addEventListener('resize', ()=> {
    w = canvas.width = innerWidth;
    h = canvas.height = innerHeight;
  });

  // throttled mousemove
  let lastMove = 0;
  window.addEventListener('mousemove', (e)=> {
    const now = performance.now();
    mouse.vx = (e.clientX - mouse.x);
    mouse.vy = (e.clientY - mouse.y);
    mouse.x = e.clientX; mouse.y = e.clientY;
    pointers.push({x:mouse.x, y:mouse.y, t:now});
    if(pointers.length>maxTrail) pointers.shift();

    // occasionally spawn small bolts on rapid movement
    if(now - lastMove > 40 && (Math.abs(mouse.vx)+Math.abs(mouse.vy) > 10)) {
      spawnBolt(mouse.x, mouse.y, 0.6);
      lastMove = now;
    }
  });

  // clicks spawn bigger flashes
  window.addEventListener('click', (e)=> {
    spawnBolt(e.clientX, e.clientY, 1.4, true);
    if(window.soundEnabled) playTone();
    // temporary heavy glow
    heavyFlash();
  });

  // helper: spawn lightning bolt
  function spawnBolt(x,y,intensity=1,branch=false){
    // bolt defined by segments; jitter will create zigzag
    const len = (120 + Math.random()*220) * intensity;
    const angle = (Math.random()*Math.PI*2);
    const sx = x; const sy = y;
    const ex = sx + Math.cos(angle) * len;
    const ey = sy + Math.sin(angle) * len;
    bolts.push({
      x:sx,y:sy,ex,ey,life:1.0,decay:0.02 + Math.random()*0.03, width:1.2 * intensity, branch:branch
    });
  }

  // heavy flash effect parameters
  let flashAlpha = 0;
  function heavyFlash(){ flashAlpha = Math.max(flashAlpha, 0.85); }

  // optional simple sound (WebAudio)
  const audioCtx = (typeof AudioContext !== 'undefined') ? new AudioContext() : null;
  function playTone(){
    if(!audioCtx) return;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.value = 220 + Math.random()*220;
    g.gain.value = 0.0001;
    o.connect(g); g.connect(audioCtx.destination);
    const now = audioCtx.currentTime;
    g.gain.exponentialRampToValueAtTime(0.08, now + 0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.25);
    o.start(now); o.stop(now + 0.26);
  }

  // main draw loop
  function draw(){
    ctx.clearRect(0,0,w,h);

    // subtle background radial glow following pointer (parallax)
    // draw multiple soft circles based on pointer trail
    for(let i=0;i<pointers.length;i++){
      const p = pointers[Math.max(0, pointers.length-1 - i)];
      const age = (performance.now() - p.t) / 800;
      const alpha = Math.max(0, 0.16 * (1 - age));
      if(alpha<=0) continu
Performance.now
www.dn.now


e;
      const radius = 80 + i*10;
      const grd = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, radius);
      grd.addColorStop(0, `rgba(255,220,180,${alpha*0.22})`);
      grd.addColorStop(1, `rgba(255,200,160,0)`);
      ctx.fillStyle = grd;
      ctx.fillRect(p.x-radius, p.y-radius, radius*2, radius*2);
    }

    // lighter ambient layer (slow moving)
    const t = performance.now() / 4000;
    const xOff = Math.cos(t) * 120;
    const yOff = Math.sin(t*0.6) * 80;
    const grd2 = ctx.createLinearGradient(0 + xOff, 0 + yOff, w - xOff, h - yOff);
    grd2.addColorStop(0, 'rgba(255,230,210,0.06)');
    grd2.addColorStop(1, 'rgba(255,245,240,0.02)');
    ctx.fillStyle = grd2;
    ctx.fillRect(0,0,w,h);

    // draw bolts
    for(let i=bolts.length-1;i>=0;i--){
      const b = bolts[i];
      // compute segments
      const segs = 14;
      ctx.lineCap = 'round';
      ctx.globalCompositeOperation = 'lighter';
      for(let s=0;s<1;s+=1){
        ctx.beginPath();
        const width = b.width * (1 + Math.random()*0.8);
        ctx.lineWidth = width;
        ctx.strokeStyle = `rgba(255,255,255,${0.9 * b.life})`;
        let prevx = b.x, prevy = b.y;
        for(let j=1;j<=segs;j++){
          const t = j / segs;
          // linear interpolation + noise
          let nx = b.x + (b.ex - b.x) * t + (Math.random()-0.5) * 24 * (1 - t);
          let ny = b.y + (b.ey - b.y) * t + (Math.random()-0.5) * 24 * (1 - t);
          ctx.lineTo(nx, ny);
          prevx = nx; prevy = ny;
        }
        ctx.stroke();
      }
      // outer glow
      ctx.beginPath();
      ctx.strokeStyle = `rgba(180,220,255,${0.18 * b.life})`;
      ctx.lineWidth = b.width * 6;
      ctx.moveTo(b.x, b.y);
      ctx.lineTo(b.ex, b.ey);
      ctx.stroke();

      // reduce life
      b.life -= b.decay;
      if(b.life <= 0) bolts.splice(i,1);
      // spawn small branch occasionally
      if(Math.random() < 0.006 && b.life > 0.6 && b.branch === false){
        spawnBolt((b.x + b.ex)/2 + (Math.random()-0.5)*80, (b.y + b.ey)/2 + (Math.random()-0.5)*80, 0.5, true);
      }
    }
    ctx.globalCompositeOperation = 'source-over';

    // heavy flash overlay (screen)
    if(flashAlpha > 0){
      ctx.fillStyle = `rgba(255,240,220,${Math.min(0.95, flashAlpha)})`;
      ctx.fillRect(0,0,w,h);
      flashAlpha *= 0.9;
      if(flashAlpha < 0.01) flashAlpha = 0;
    }

    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);

  // occasional ambient bolts from top to bottom for drama (very sparse)
  setInterval(()=>{
    if(Math.random() < 0.4) return;
    const x = Math.random() * w;
    const y = Math.random() * h * 0.6;
    spawnBolt(x, y, 1.0, false);
  }, 2200);

})();

/* ===========================
   Lightweight performance note:
   - Canvas effects are designed to be moderate. If you experience CPU/GPU load on older machines,
     reduce intervals or remove ambient bolt spawns (search for setInterval in the file).
   =========================== */
   /* ========================
   Дополнение: облака + неоновые всполохи
   ======================== */
(function(){
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d', {alpha:true});
  let w = innerWidth, h = innerHeight;

  // Создаём облачные слои
  const clouds = [];
  for(let i=0;i<8;i++){
    clouds.push({
      x: Math.random()*w,
      y: Math.random()*h*0.6,
      r: 120 + Math.random()*180,
      a: 0.05 + Math.random()*0.08,
      speed: 0.05 + Math.random()*0.12,
    });
  }

  // Неоновая подсветка фона
  let neonPhase = 0;

  function drawClouds(){
    neonPhase += 0.005;
    for(const c of clouds){
      c.x += c.speed;
      if(c.x - c.r > w) c.x = -c.r;
      const grd = ctx.createRadialGradient(c.x, c.y, 0, c.x, c.y, c.r);
      grd.addColorStop(0, `rgba(255,255,255,${c.a*0.8})`);
      grd.addColorStop(1, `rgba(255,255,255,0)`);
      ctx.fillStyle = grd;
      ctx.fillRect(c.x-c.r, c.y-c.r, c.r*2, c.r*2);
    }

    // Неоновая лёгкая волна по экрану
    const glow = Math.sin(neonPhase)*0.2 + 0.4;
    const grd2 = ctx.createLinearGradient(0,0,w,h);
    grd2.addColorStop(0, `rgba(255,220,180,${glow*0.05})`);
    grd2.addColorStop(1, `rgba(180,220,255,${glow*0.05})`);
    ctx.fillStyle = grd2;
    ctx.fillRect(0,0,w,h);
  }

  // Встраиваем в существующий цикл рисования lightning
  const originalDraw = requestAnimationFrame;
  const observer = new MutationObserver(()=>{
    // ждём, пока оригинальный draw() появится
    if(typeof window.requestAnimationFrame === 'function'){
      // перехват цикла
      const raf = window.requestAnimationFrame;
      window.requestAnimationFrame = function(fn){
        return raf(function(){
          drawClouds();
          fn();
        });
      };
      observer.disconnect();
    }
  });
  observer.observe(document.documentElement, {childList:false, subtree:true});
})();
</script>

</body>
</html>*
